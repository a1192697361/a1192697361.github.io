<!DOCTYPE html>
<html lang="zh-CN">
    
    <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
    <meta name="description" content="åŸºäºQtçš„éŸ³é¢‘æ’­æ”¾å™¨ç¨‹åºè®¾è®¡è®°å½•" />
    <meta name="hexo-theme-A4" content="v1.8.3" />
    <link rel="alternate icon" type="image/webp" href="/img/favicon.webp">
    <title>Fingsinz&#39;s space | é£ä¿¡æ¢“</title>

    
        
<link rel="stylesheet" href="/css/highlight/style1.css">

        
<link rel="stylesheet" href="/css/reset.css">

        
<link rel="stylesheet" href="/css/markdown.css">

        
<link rel="stylesheet" href="/css/fonts.css">
 
         <!--æ³¨æ„ï¼šé¦–é¡µæ—¢ä¸æ˜¯postä¹Ÿä¸æ˜¯page-->
        
        
        
<link rel="stylesheet" href="/css/ui.css">
 
        
<link rel="stylesheet" href="/css/style.css">


        
            <!--è¿”å›é¡¶éƒ¨css-->
            
<link rel="stylesheet" href="/css/returnToTop.css">

            
<link rel="stylesheet" href="/css/unicons.css">

        
        
            <!--ç›®å½•-->
            
<link rel="stylesheet" href="/css/toc.css">

        
    

    
    
   
<link rel="stylesheet" href="/css/lightgallery.min.css">


<meta name="generator" content="Hexo 7.1.1">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet" /></head>
    
    <style>
        :root {
            --waline-theme-color: #000000; 
            --waline-color: #000000; 
            --waline-border-color: #000000; 
            --waline-white: #000000; 
            --waline-bgcolor-light: white;  
        }
        body {
            color: #000000;
            background: #bed2bb;
        }
        .post-md code {
            background: #e7f7f3;
            color: #7f688d; 
        }
        .post-md pre, .post-md .highlight {
            background: #e7f7f3;
            color: #7f688d; 
        }
        pre .string, pre .value, pre .inheritance, pre .header, pre .ruby .symbol, pre .xml .cdata {
            color: #000000;
        }
        pre .number, pre .preprocessor, pre .built_in, pre .literal, pre .params, pre .constant {
            color: #000000;
        }
        .year-font-color {
            color: #000000 !important;
        }
        .wl-card span.wl-nick {
            color: #000000; 
        }
        .wl-card .wl-badge {
            border: 1px solid #000000;
            color: #000000; 
        }
        .wl-btn {
            border: 1px solid #000000; 
            color:  #000000;  
        }
        .wl-btn.primary {
            color: white; 
        }
        .wl-header label {
            color: #000000;
        }
        a {
            color: #6b798e;
        }

        .post-md a {
            color: #6b798e;
        }

        .nav li a {
            color: #6b798e;
        }

        .archive-main a:link {
            color: #6b798e;
        }
        .archive-main a:visited {
            color: #6b798e; 
        }

        .archive li span {
            color: #000000;
        }

        .post-main-title {
            color: #000000;
        }

        .post-md h1,
        .post-md h2,
        .post-md h3,
        .post-md h4,
        .post-md h5,
        .post-md h6 {
            color: #000000;
        }

        [data-waline] p {
            color: #000000;
        }
        [data-waline] a {
            color: #000000;
        } 
        .wl-sort li.active {
            color: #000000;
        }

        .wl-card .wl-meta>span {
            background: white;
        }

        .paper {
            background: #bed2bb;
        }

        .index-main {
            background: white;
        }

        .paper-main {
            background: white;
        }

        .wl-panel {
            background: white;
        }

        .archive li:nth-child(odd) {
            background: white;
            ;
        }

        .archive li:nth-child(even) {
            background: white;
        }

        .post-md table tr:nth-child(odd) td {
            background: white;
        }

        .post-md table tr:nth-child(even) td {
            background: white;
        }

    
        .progress-wrap::after {
            color: #000000; /* ç®­å¤´çš„é¢œè‰² */
        }
        .progress-wrap svg.progress-circle path {
	        stroke: #000000; /* è¾¹æ¡†çš„é¢œè‰² */
        }
        .progress-wrap::before {
	        background-image: linear-gradient(298deg, #6b798e, #6b798e); /* é¼ æ ‡æ»‘è¿‡çš„ç®­å¤´é¢œè‰² */
         }

        .return-to-last-progress-wrap::after {
            color: #000000; /* ç®­å¤´çš„é¢œè‰² */
        }
        .return-to-last-progress-wrap svg.progress-circle path {
	        stroke: #000000; /* è¾¹æ¡†çš„é¢œè‰² */
        }
        .return-to-last-progress-wrap::before {
	        background-image: linear-gradient(298deg, #6b798e, #6b798e); /* é¼ æ ‡æ»‘è¿‡çš„ç®­å¤´é¢œè‰² */
         }

         .left-toc-container::-webkit-scrollbar-thumb {
            background-color: #000000; /* è®¾ç½®æ»šåŠ¨æ¡æ‹–åŠ¨å—çš„é¢œè‰² */
        }

        .bs-docs-sidebar .nav>.active>a,
        .bs-docs-sidebar .nav>li>a:hover,
        .bs-docs-sidebar .nav>li>a:focus {
            color: #6b798e;
            border-left-color: #6b798e;
        }
        .bs-docs-sidebar .nav>li>a {
            color:  #000000;
        }
    </style>

    
    <body>
        
            <div class="left-toc-container">
                <nav id="toc" class="bs-docs-sidebar"></nav>
            </div>
        
        <div class="paper">
            
            
            
            
                <div class="shadow-drop-2-bottom paper-main">
                    


<div class="header">
    <div class="header-container">
        <img style="
        width: 56px;
        height: auto;" alt="^-^" cache-control="max-age=86400" class="header-img" src="/img/favicon.webp" width="10%"></img>
        <div class="header-content">
            <a class="logo" href="/">Fingsinz&#39;s space</a> 
            <span class="description">æˆ‘åœ¨æƒ³ï¼Œæ—¶ä¸‹ä½ æ‰€éœ€è¦çš„ï¼Œåº”è¯¥æ˜¯ç—›ç—›å¿«å¿«æ¢ä¸ªå¿ƒæƒ…ï¼Œå¹²å¹²è„†è„†äº«å—äººç”Ÿã€‚</span> 
        </div>
        
    </div>
    
   
    <ul class="nav">
        
            
                <li><a href="/">é¦–é¡µğŸšï¸</a></li>
            
        
            
                <li><a href="/list/">æ–‡ç« ğŸ“„</a></li>
            
        
            
                <li><a href="/categories/">åˆ†ç±»ğŸ“</a></li>
            
        
            
                <li><a href="/notes/">ç¬”è®°ğŸ“”</a></li>
            
        
            
                <li><a href="/funny/">è¶£äº‹ğŸ’¡</a></li>
            
        
            
                <li><a href="/about/">å…³äºğŸ§‘</a></li>
            
        
    </ul>
</div> 
        
                    
                    

                    
                    
                    
                    <!--è¯´æ˜æ˜¯æ–‡ç« posté¡µé¢-->
                    
                        <div class="post-main">

    
        <div class="post-main-title">
            åŸºäºQtçš„éŸ³é¢‘æ’­æ”¾å™¨ç¨‹åºè®¾è®¡è®°å½•
        </div>
      
    

    <div class="post-md">
        
            
                <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link"><span class="post-toc-text">ä¸€ã€å‰è¨€</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link"><span class="post-toc-text">äºŒã€æ¨¡å—æ„æ€</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link"><span class="post-toc-text">ä¸‰ã€æ¨¡å—å®ç°</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3-1-%E7%95%8C%E9%9D%A2%E8%AE%BE%E8%AE%A1"><span class="post-toc-text">3.1 ç•Œé¢è®¾è®¡</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3-1-%E5%88%9D%E5%A7%8B%E5%8C%96%E5%B7%A5%E7%A8%8B"><span class="post-toc-text">3.1 åˆå§‹åŒ–å·¥ç¨‹</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3-3-%E6%92%AD%E6%94%BE-%E6%9A%82%E5%81%9C%E6%A8%A1%E5%9D%97"><span class="post-toc-text">3.3 æ’­æ”¾&#x2F;æš‚åœæ¨¡å—</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3-4-%E5%81%9C%E6%AD%A2%E6%A8%A1%E5%9D%97"><span class="post-toc-text">3.4 åœæ­¢æ¨¡å—</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3-5-%E6%8E%A7%E5%88%B6%E9%9F%B3%E9%A2%91%E8%BF%9B%E5%BA%A6%E6%A8%A1%E5%9D%97"><span class="post-toc-text">3.5 æ§åˆ¶éŸ³é¢‘è¿›åº¦æ¨¡å—</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3-6-%E7%AE%A1%E7%90%86%E9%9F%B3%E4%B9%90%E5%88%97%E8%A1%A8%E6%A8%A1%E5%9D%97"><span class="post-toc-text">3.6 ç®¡ç†éŸ³ä¹åˆ—è¡¨æ¨¡å—</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3-7-%E9%9F%B3%E9%87%8F%E6%8E%A7%E5%88%B6%E6%A8%A1%E5%9D%97"><span class="post-toc-text">3.7 éŸ³é‡æ§åˆ¶æ¨¡å—</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3-8-%E4%BF%A1%E6%81%AF%E6%98%BE%E7%A4%BA%E4%B8%8E%E5%90%8C%E6%AD%A5%E6%A8%A1%E5%9D%97"><span class="post-toc-text">3.8 ä¿¡æ¯æ˜¾ç¤ºä¸åŒæ­¥æ¨¡å—</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link"><span class="post-toc-text">å››ã€æ€»ç»“</span></a></li></ol>
            
        
        <div class=".article-gallery"><p>ä½¿ç”¨Qtçš„å·¥å…·å®Œæˆä¸€ä¸ªéŸ³é¢‘æ’­æ”¾å™¨â€”â€”FMusicPlayer</p>
<p>å…³é”®è¯ï¼šQtã€C++</p>
<span id="more"></span>
<hr>
<h1>ä¸€ã€å‰è¨€</h1>
<p>åˆ©ç”¨Qtçš„å·¥å…·å¼€å‘ä¸€ä¸ªéŸ³ä¹æ’­æ”¾å™¨ï¼Œç•Œé¢å¦‚ä¸‹å›¾ï¼š</p>
<p><a target="_blank" rel="noopener" href="https://fblog-img.oss-cn-hangzhou.aliyuncs.com/blog/fmusicplayer_ui.jpg" title="ç•Œé¢æˆªå›¾" class="gallery-item" style="box-shadow: none;"> <img src="https://fblog-img.oss-cn-hangzhou.aliyuncs.com/blog/fmusicplayer_ui.jpg" alt="ç•Œé¢æˆªå›¾"></a></p>
<p>Qtç‰ˆæœ¬5.12.12ã€‚è¯¥é¡¹ç›®ååˆ†ç®€å•ï¼Œé€‚åˆç”¨äºç»ƒæ‰‹ã€‚</p>
<h1>äºŒã€æ¨¡å—æ„æ€</h1>
<p>æ ¹æ®å¸‚åœºä¸Šç°æœ‰çš„éŸ³ä¹æ’­æ”¾å™¨æ€è€ƒï¼Œä¸€ä¸ªåŸºæœ¬çš„éŸ³ä¹æ’­æ”¾å™¨åº”è¯¥å…·æœ‰ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
<ul>
<li>
<p>æ’­æ”¾/æš‚åœ</p>
</li>
<li>
<p>åœæ­¢</p>
</li>
<li>
<p>æ§åˆ¶éŸ³é¢‘æ’­æ”¾è¿›åº¦</p>
</li>
<li>
<p>ç®¡ç†éŸ³ä¹åˆ—è¡¨</p>
</li>
<li>
<p>éŸ³é‡æ§åˆ¶</p>
</li>
<li>
<p>ä¿¡æ¯æ˜¾ç¤º</p>
</li>
<li>
<p>â€¦â€¦</p>
</li>
</ul>
<p>æ­¤è½¯ä»¶ä»…å®ç°äº†ä¸Šè¿°åŠŸèƒ½ã€‚</p>
<h1>ä¸‰ã€æ¨¡å—å®ç°</h1>
<p>æ­¤éŸ³ä¹æ’­æ”¾å™¨ä¸»è¦ä½¿ç”¨Qtç°æˆçš„QMediaPlayerç±»å’ŒQMediaPlaylistç±»è¿›è¡Œç»´æŠ¤ã€‚</p>
<h2 id="3-1-ç•Œé¢è®¾è®¡">3.1 ç•Œé¢è®¾è®¡</h2>
<p>æ•´ä½“ç•Œé¢è®¾è®¡å¦‚å›¾ï¼š</p>
<p><a target="_blank" rel="noopener" href="https://fblog-img.oss-cn-hangzhou.aliyuncs.com/blog/fmusicplayer_uidesign.jpg" title="ç•Œé¢è®¾è®¡" class="gallery-item" style="box-shadow: none;"> <img src="https://fblog-img.oss-cn-hangzhou.aliyuncs.com/blog/fmusicplayer_uidesign.jpg" alt="ç•Œé¢è®¾è®¡"></a></p>
<ul>
<li>
<p>9ä¸ªæŒ‰é’®QPushButtonï¼Œå¯¹åº”å„ç§åŠŸèƒ½ï¼›</p>
</li>
<li>
<p>3ä¸ªæ ‡ç­¾æ–‡å­—QLabelï¼Œç”¨äºè¯´æ˜ï¼›</p>
</li>
<li>
<p>2ä¸ªæ–‡æœ¬æ¡†QLineEditï¼Œç”¨äºæ˜¾ç¤ºä¿¡æ¯ï¼›</p>
</li>
<li>
<p>1ä¸ªåˆ—è¡¨QListWidgetï¼Œç”¨äºå­˜æ”¾æ’­æ”¾åˆ—è¡¨ï¼›</p>
</li>
<li>
<p>2ä¸ªæ»‘æ¡QSliderï¼Œä¸€ä¸ªç”¨äºæ§åˆ¶å’Œæ˜¾ç¤ºè¿›åº¦ï¼Œä¸€ä¸ªç”¨äºæ§åˆ¶å’Œæ˜¾ç¤ºéŸ³é‡ã€‚</p>
</li>
<li>
<p>è‹¥å¹²ä¸ªå¼¹ç°§ç”¨äºè°ƒæ•´å¸ƒå±€ã€‚</p>
</li>
</ul>
<p>å®Œæˆåçš„ç¨‹åºç•Œé¢ï¼š</p>
<p><a target="_blank" rel="noopener" href="https://fblog-img.oss-cn-hangzhou.aliyuncs.com/blog/fmusicplayer_ui2.jpg" title="æœŸæœ›çš„UI" class="gallery-item" style="box-shadow: none;"> <img src="https://fblog-img.oss-cn-hangzhou.aliyuncs.com/blog/fmusicplayer_ui2.jpg" alt="æœŸæœ›çš„UI"></a></p>
<h2 id="3-1-åˆå§‹åŒ–å·¥ç¨‹">3.1 åˆå§‹åŒ–å·¥ç¨‹</h2>
<p>æ­¤ç¨‹åºä½¿ç”¨äº†Qtçš„multimediaéƒ¨ä»¶ï¼Œæ‰€ä»¥é¦–å…ˆåœ¨Qtçš„.proå·¥ç¨‹æ–‡ä»¶ä¸­åŒ…å«multimediaã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">â€¦â€¦</span><br><span class="line">QT  += multimedia</span><br><span class="line">â€¦â€¦</span><br></pre></td></tr></tbody></table></figure>
<p>æ¥ç€é¡¹ç›®ä¸­åº”è¯¥æœ‰ä»¥ä¸‹æ–‡ä»¶ï¼š</p>
<blockquote>
<p>mainwindow.h<br>
mainwindow.cpp<br>
mainwindow.ui<br>
main.cpp</p>
</blockquote>
<ul>
<li>
<p>mainwindow.hï¼šä¸»è¦å­˜æ”¾ä¸»çª—å£çš„ä¸€äº›å£°æ˜</p>
</li>
<li>
<p>mainwindow.cppï¼šè®°å½•ä¸»çª—å£çš„å®ç°</p>
</li>
<li>
<p>mainwindow.uiï¼šç•Œé¢çš„è®¾è®¡æ–‡ä»¶</p>
</li>
<li>
<p>main.cppï¼šç¨‹åºå…¥å£</p>
</li>
</ul>
<p>é¦–å…ˆåœ¨mainwindow.hä¸­å°†æˆ‘ä»¬å®ç°çš„æ¨¡å—æ·»åŠ æ§½å‡½æ•°å£°æ˜å’Œæˆå‘˜å˜é‡çš„å£°æ˜ï¼š</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">QMediaPlayer *musicplayer; <span class="comment">// æ’­æ”¾å™¨</span></span><br><span class="line">QMediaPlaylist *musicplayList; <span class="comment">// æ’­æ”¾åˆ—è¡¨</span></span><br><span class="line"></span><br><span class="line">QString durationTime;<span class="comment">// éŸ³é¢‘æ€»é•¿åº¦</span></span><br><span class="line">QString  positionTime;<span class="comment">// å½“å‰æ’­æ”¾åˆ°ä½ç½®</span></span><br><span class="line"><span class="comment">// æ§½å‡½æ•°å£°æ˜ç•¥ï¼Œè§æºä»£ç </span></span><br></pre></td></tr></tbody></table></figure>
<p>æ¥ç€åœ¨ä¸»çª—å£æ„é€ å‡½æ•°ä¸­åšä¸€äº›åˆå§‹åŒ–ï¼š</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºå®ä¾‹</span></span><br><span class="line">musicplayer = <span class="keyword">new</span> <span class="built_in">QMediaPlayer</span>(<span class="keyword">this</span>);</span><br><span class="line">musicplayList = <span class="keyword">new</span> <span class="built_in">QMediaPlaylist</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¾ªç¯æ’­æ”¾</span></span><br><span class="line">musicplayList-&gt;<span class="built_in">setPlaybackMode</span>(QMediaPlaylist::Loop);</span><br><span class="line">musicplayer-&gt;<span class="built_in">setPlaylist</span>(musicplayList);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é»˜è®¤éŸ³é‡ï¼ŒåŒæ­¥éŸ³é‡æ˜¾ç¤º</span></span><br><span class="line">ui-&gt;volume-&gt;<span class="built_in">setValue</span>(<span class="number">50</span>);	</span><br><span class="line"><span class="built_in">changedVolume</span>(<span class="number">50</span>);			</span><br></pre></td></tr></tbody></table></figure>
<h2 id="3-3-æ’­æ”¾-æš‚åœæ¨¡å—">3.3 æ’­æ”¾/æš‚åœæ¨¡å—</h2>
<p>å½“ç‚¹å‡»æ’­æ”¾é”®æ—¶æ’­æ”¾éŸ³ä¹ï¼Œä¸ºæ’­æ”¾æŒ‰é’®playç»‘å®šå•å‡»äº‹ä»¶ï¼Œè§¦å‘playMusic()å‡½æ•°ï¼š</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ’­æ”¾éŸ³ä¹</span></span><br><span class="line"><span class="built_in">connect</span>(ui-&gt;play, <span class="built_in">SIGNAL</span>(<span class="built_in">clicked</span>()), <span class="keyword">this</span>, <span class="built_in">SLOT</span>(<span class="built_in">playMusic</span>()));</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::playMusic</span><span class="params">()</span><span class="comment">//æ’­æ”¾</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="comment">// ç»´æŠ¤æ’­æ”¾åˆ—è¡¨ï¼Œä½¿å…¶ç´¢å¼•æ­£å¸¸ï¼Œæ­£å¸¸æ’­æ”¾</span></span><br><span class="line">    <span class="keyword">if</span>(musicplayList-&gt;<span class="built_in">currentIndex</span>()&lt;<span class="number">0</span>)</span><br><span class="line">        musicplayList-&gt;<span class="built_in">setCurrentIndex</span>(<span class="number">0</span>);</span><br><span class="line">    musicplayer-&gt;<span class="built_in">play</span>();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>å½“ç‚¹å‡»æš‚åœé”®æ—¶æš‚åœéŸ³ä¹ï¼Œæ”¯æŒè®°å½•ä½ç½®ï¼Œä»ä¸Šæ¬¡æš‚åœçš„ä½ç½®æ’­æ”¾ã€‚ä¸ºæš‚åœæŒ‰é’®ç»‘å®šå•å‡»äº‹ä»¶ï¼Œè§¦å‘pauseMusic()å‡½æ•°ï¼š</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æš‚åœéŸ³ä¹</span></span><br><span class="line"><span class="built_in">connect</span>(ui-&gt;pause, <span class="built_in">SIGNAL</span>(<span class="built_in">clicked</span>()), <span class="keyword">this</span>, <span class="built_in">SLOT</span>(<span class="built_in">pauseMusic</span>()));</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::pauseMusic</span><span class="params">()</span><span class="comment">//æš‚åœæ’­æ”¾</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    musicplayer-&gt;<span class="built_in">pause</span>();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="3-4-åœæ­¢æ¨¡å—">3.4 åœæ­¢æ¨¡å—</h2>
<p>å½“ç‚¹å‡»åœæ­¢é”®æ—¶ï¼Œåœæ­¢éŸ³ä¹ï¼ŒéŸ³ä¹æ’­æ”¾ä½ç½®å½’é›¶ã€‚ä¸ºåœæ­¢æŒ‰é’®ç»‘å®šå•å‡»äº‹ä»¶ï¼Œè§¦å‘stopMusic()å‡½æ•°ï¼š</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœæ­¢éŸ³ä¹</span></span><br><span class="line"><span class="built_in">connect</span>(ui-&gt;stop, <span class="built_in">SIGNAL</span>(<span class="built_in">clicked</span>()), <span class="keyword">this</span>, <span class="built_in">SLOT</span>(<span class="built_in">stopMusic</span>()));</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::stopMusic</span><span class="params">()</span><span class="comment">//åœæ­¢æ’­æ”¾</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    musicplayer-&gt;<span class="built_in">stop</span>();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="3-5-æ§åˆ¶éŸ³é¢‘è¿›åº¦æ¨¡å—">3.5 æ§åˆ¶éŸ³é¢‘è¿›åº¦æ¨¡å—</h2>
<p>æ’­æ”¾æ—¶ï¼ŒéŸ³é¢‘è¿›åº¦æ¡åº”å½“å¯ä»¥è¢«æ‹–åŠ¨ï¼Œå¹¶ä¸”æ›´æ–°æ’­æ”¾çš„ä½ç½®ã€‚ä¸ºè¿›åº¦æ¡ç»‘å®šå€¼ä¿®æ”¹äº‹ä»¶ï¼Œè§¦å‘changedPosition()å‡½æ•°ï¼Œå‡½æ•°å‚æ•°ä¸ºè¿›åº¦æ¡ä¼ å…¥çš„ä½ç½®å‚æ•°ã€‚</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿›åº¦æ¡æ§åˆ¶</span></span><br><span class="line"><span class="built_in">connect</span>(ui-&gt;timebar, <span class="built_in">SIGNAL</span>(<span class="built_in">valueChanged</span>(<span class="type">int</span>)), <span class="keyword">this</span>, <span class="built_in">SLOT</span>(<span class="built_in">changedPosition</span>(<span class="type">int</span>)));</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::changedPosition</span><span class="params">(<span class="type">int</span> pos)</span>   <span class="comment">// ä¿®æ”¹æ’­æ”¾ä½ç½®</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    musicplayer-&gt;<span class="built_in">setPosition</span>(pos);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="3-6-ç®¡ç†éŸ³ä¹åˆ—è¡¨æ¨¡å—">3.6 ç®¡ç†éŸ³ä¹åˆ—è¡¨æ¨¡å—</h2>
<p>æ’­æ”¾å™¨åº”è¯¥å¯ä»¥è¾“å…¥å¤šä¸ªæ–‡ä»¶ï¼Œæ¥ç€é¡ºåºæ’­æ”¾ï¼Œæ‰€ä»¥éœ€è¦ç»´æŠ¤ä¸€ä¸ªéŸ³ä¹åˆ—è¡¨ã€‚</p>
<p>é¦–å…ˆå¯ä»¥å‘éŸ³ä¹åˆ—è¡¨æ·»åŠ éŸ³ä¹ï¼Œä¸ºæ·»åŠ éŸ³ä¹æŒ‰é’®ç»‘å®šå•å‡»äº‹ä»¶ï¼Œç»‘å®šaddMusic()å‡½æ•°ã€‚</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ·»åŠ æ–‡ä»¶</span></span><br><span class="line"><span class="built_in">connect</span>(ui-&gt;addMusic, <span class="built_in">SIGNAL</span>(<span class="built_in">clicked</span>()), <span class="keyword">this</span>, <span class="built_in">SLOT</span>(<span class="built_in">addMusictoList</span>()));</span><br></pre></td></tr></tbody></table></figure>
<p>è¯»å–æ–‡ä»¶æ—¶ï¼Œwavæ–‡ä»¶æ˜¯æ”¯æŒçš„ï¼Œè€Œmp3æ–‡ä»¶éœ€è¦å¤–ç½®è§£ç å™¨çš„æ”¯æŒï¼Œå¤„ç†mp3æ–‡ä»¶æ–¹æ³•è§æ–‡ç« æœ€åã€‚</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::addMusictoList</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    QString curPath = QDir::<span class="built_in">currentPath</span>();</span><br><span class="line">    QString title = <span class="string">"é€‰æ‹©éŸ³é¢‘æ–‡ä»¶"</span>;</span><br><span class="line">    QString filter = <span class="string">"éŸ³é¢‘æ–‡ä»¶(*.wav *.mp3)"</span>;</span><br><span class="line">    QStringList fileList = QFileDialog::<span class="built_in">getOpenFileNames</span>(<span class="keyword">this</span>, title, curPath, filter);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// æ·»åŠ æ–‡ä»¶å°‘äº1ä¸ªæ—¶é€€å‡ºå‡½æ•°</span></span><br><span class="line">    <span class="keyword">if</span>(filter.<span class="built_in">count</span>() &lt; <span class="number">1</span>)  <span class="keyword">return</span>;</span><br><span class="line">	<span class="comment">// å°†è¯»å–çš„æ–‡ä»¶æ”¾å…¥musicplayListé‡Œ</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; fileList.<span class="built_in">count</span>(); ++ i)</span><br><span class="line">    {</span><br><span class="line">        QString aFile = fileList.<span class="built_in">at</span>(i);</span><br><span class="line">        musicplayList-&gt;<span class="built_in">addMedia</span>(QUrl::<span class="built_in">fromLocalFile</span>(aFile));</span><br><span class="line"></span><br><span class="line">        <span class="function">QFileInfo <span class="title">fileinfo</span><span class="params">(aFile)</span></span>;</span><br><span class="line">        ui-&gt;playList-&gt;<span class="built_in">addItem</span>(fileinfo.<span class="built_in">fileName</span>());</span><br><span class="line">    }</span><br><span class="line">	<span class="comment">// å°†éŸ³ä¹åˆ—è¡¨çš„ç¬¬ä¸€é¦–éŸ³é¢‘ä½œä¸ºå¾…æ’­æ”¾éŸ³é¢‘</span></span><br><span class="line">    <span class="keyword">if</span>(musicplayer-&gt;<span class="built_in">state</span>() != QMediaPlayer::PlayingState)</span><br><span class="line">        musicplayList-&gt;<span class="built_in">setCurrentIndex</span>(<span class="number">0</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>åŒæ ·è¿˜åº”æ”¯æŒç§»é™¤éŸ³é¢‘æ–‡ä»¶ï¼š</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç§»é™¤æ–‡ä»¶</span></span><br><span class="line"><span class="built_in">connect</span>(ui-&gt;delMusic, <span class="built_in">SIGNAL</span>(<span class="built_in">clicked</span>()), <span class="keyword">this</span>, <span class="built_in">SLOT</span>(<span class="built_in">delMusic</span>()));</span><br></pre></td></tr></tbody></table></figure>
<p>ç§»é™¤æ–‡ä»¶æ—¶è¿˜åº”åˆ¤æ–­ç§»é™¤çš„æ˜¯å¦ä¸ºå½“å‰æ’­æ”¾éŸ³ä¹ï¼Œè¿›è¡Œç›¸åº”å¤„ç†ã€‚</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::delMusic</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="type">int</span> pos = ui-&gt;playList-&gt;<span class="built_in">currentRow</span>(); <span class="comment">// è·å–é€‰ä¸­è¡Œ</span></span><br><span class="line">    QListWidgetItem *item = ui-&gt;playList-&gt;<span class="built_in">takeItem</span>(pos);</span><br><span class="line">    <span class="keyword">delete</span>  item;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(musicplayList-&gt;<span class="built_in">currentIndex</span>() == pos)<span class="comment">// åˆ é™¤æ˜¯å½“å‰æ’­æ”¾çš„éŸ³ä¹æ—¶</span></span><br><span class="line">    {</span><br><span class="line">        <span class="type">int</span> nextPos = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(pos &gt;= <span class="number">1</span>)    nextPos = pos - <span class="number">1</span>;</span><br><span class="line">        musicplayList-&gt;<span class="built_in">removeMedia</span>(pos);</span><br><span class="line">        <span class="keyword">if</span>(ui-&gt;playList-&gt;<span class="built_in">count</span>() &gt; <span class="number">0</span>)</span><br><span class="line">        {</span><br><span class="line">            musicplayList-&gt;<span class="built_in">setCurrentIndex</span>(nextPos);</span><br><span class="line">            <span class="built_in">onPlayListChanged</span>(nextPos);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        {</span><br><span class="line">            musicplayer-&gt;<span class="built_in">stop</span>();</span><br><span class="line">            ui-&gt;playmusic-&gt;<span class="built_in">setText</span>(<span class="string">"æ— æ–‡ä»¶"</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        musicplayList-&gt;<span class="built_in">removeMedia</span>(pos);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>æ¸…ç©ºæ–‡ä»¶åˆ™æ˜¯ç§»é™¤æ–‡ä»¶çš„ç®€åŒ–ç‰ˆï¼Œç›´æ¥å°†æ’­æ”¾åˆ—è¡¨æ¸…ç©ºå³å¯ã€‚</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¸…ç©ºæ–‡ä»¶åˆ—è¡¨</span></span><br><span class="line"><span class="built_in">connect</span>(ui-&gt;clearList, <span class="built_in">SIGNAL</span>(<span class="built_in">clicked</span>()), <span class="keyword">this</span>, <span class="built_in">SLOT</span>(<span class="built_in">clearList</span>()));</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::clearList</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    musicplayList-&gt;<span class="built_in">clear</span>();	<span class="comment">// æ¸…ç©ºåˆ—è¡¨</span></span><br><span class="line">    ui-&gt;playList-&gt;<span class="built_in">clear</span>();	<span class="comment">// æ›´æ–°UI</span></span><br><span class="line">    ui-&gt;playmusic-&gt;<span class="built_in">clear</span>();</span><br><span class="line">    ui-&gt;time-&gt;<span class="built_in">clear</span>();</span><br><span class="line">    ui-&gt;timebar-&gt;<span class="built_in">setValue</span>(<span class="number">0</span>);</span><br><span class="line">    musicplayer-&gt;<span class="built_in">stop</span>();	<span class="comment">// åœæ­¢æ’­æ”¾</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>æœ€åè¿˜å¯ä»¥æ·»åŠ ä¸Šä¸€é¦–å’Œä¸‹ä¸€é¦–çš„åŠŸèƒ½ï¼Œåªéœ€ç®€å•ç»‘å®šä¸€ä¸‹ç‚¹å‡»äº‹ä»¶å’Œè°ƒç”¨musicplayListçš„å‡½æ•°å³å¯ã€‚</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">musicplayList-&gt;<span class="built_in">previous</span>();	<span class="comment">// ä¸Šä¸€é¦–</span></span><br><span class="line">musicplayList-&gt;<span class="built_in">next</span>();		<span class="comment">// ä¸‹ä¸€é¦–</span></span><br></pre></td></tr></tbody></table></figure>
<h2 id="3-7-éŸ³é‡æ§åˆ¶æ¨¡å—">3.7 éŸ³é‡æ§åˆ¶æ¨¡å—</h2>
<p>ä¸€ä¸ªæ’­æ”¾å™¨è¿˜åº”è¯¥æ”¯æŒéŸ³é‡çš„è°ƒèŠ‚ï¼Œè€ŒQMediaPlayeræ”¯æŒéŸ³é‡è°ƒèŠ‚ï¼Œæ‰€ä»¥ç»‘å®šæ»‘æ¡å€¼æ”¹å˜äº‹ä»¶ä¸”è°ƒç”¨å‡½æ•°å³å¯ï¼Œäº‹ä»¶è¿”å›ä¸€ä¸ªæ»‘æ¡çš„ä½ç½®å‚æ•°ã€‚</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ§åˆ¶éŸ³é‡</span></span><br><span class="line"><span class="built_in">connect</span>(ui-&gt;volume, <span class="built_in">SIGNAL</span>(<span class="built_in">valueChanged</span>(<span class="type">int</span>)), <span class="keyword">this</span>, <span class="built_in">SLOT</span>(<span class="built_in">changedVolume</span>(<span class="type">int</span>)));</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::changedVolume</span><span class="params">(<span class="type">int</span> value)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    musicplayer-&gt;<span class="built_in">setVolume</span>(value);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="3-8-ä¿¡æ¯æ˜¾ç¤ºä¸åŒæ­¥æ¨¡å—">3.8 ä¿¡æ¯æ˜¾ç¤ºä¸åŒæ­¥æ¨¡å—</h2>
<p>æ ¹æ®UIçš„è®¾è®¡ï¼Œæ˜¾ç¤ºçš„ä¿¡æ¯æœ‰ï¼šå½“å‰æ’­æ”¾çš„éŸ³é¢‘åå­—ã€æ’­æ”¾æ—¶é—´/å®Œæ•´æ—¶é—´ã€‚å½“æ’­æ”¾éŸ³é¢‘è¿›è¡Œåˆ‡æ¢æ—¶ï¼Œéœ€è¦æ›´æ–°éŸ³é¢‘åå­—ã€æ’­æ”¾æ—¶é—´å’ŒéŸ³é¢‘å®Œæ•´æ—¶é—´ç­‰ä¿¡æ¯ã€‚</p>
<p>ä¸ºæ’­æ”¾åˆ—è¡¨musicplayListçš„å½“å‰ç´¢å¼•å˜åŒ–äº‹ä»¶ç»‘å®šonPlayListChanged()å‡½æ•°ï¼Œäº‹ä»¶è¿”å›æ–°çš„ç´¢å¼•å·ï¼Œç”¨æ­¤æ›´æ–°æ’­æ”¾çš„éŸ³é¢‘åå­—ã€‚</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ’­æ”¾éŸ³ä¹å˜åŒ–</span></span><br><span class="line"><span class="built_in">connect</span>(musicplayList, <span class="built_in">SIGNAL</span>(<span class="built_in">currentIndexChanged</span>(<span class="type">int</span>)), <span class="keyword">this</span>, <span class="built_in">SLOT</span>(<span class="built_in">onPlayListChanged</span>(<span class="type">int</span>)));</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::onPlayListChanged</span><span class="params">(<span class="type">int</span> pos)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    ui-&gt;playList-&gt;<span class="built_in">setCurrentRow</span>(pos);</span><br><span class="line">    <span class="comment">// ä½¿ç”¨QListWidgetItemç±»å–å‡ºQListWidgetçš„æŸä¸€è¡Œ</span></span><br><span class="line">    QListWidgetItem *item = ui-&gt;playList-&gt;<span class="built_in">currentItem</span>();</span><br><span class="line">    <span class="keyword">if</span>(item)</span><br><span class="line">    {</span><br><span class="line">		<span class="comment">// æ›´æ–°UIçš„éŸ³é¢‘åå­—</span></span><br><span class="line">        ui-&gt;playmusic-&gt;<span class="built_in">setText</span>(item-&gt;<span class="built_in">text</span>());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>åˆ‡æ¢éŸ³é¢‘æ—¶ï¼Œå…¶æ€»æ—¶é•¿ä¹Ÿåº”è¯¥å˜åŒ–ï¼Œéœ€è¦ä¸ºæ’­æ”¾å™¨musicplayerçš„æ’­æ”¾ä½ç½®å˜åŒ–durationChangedäº‹ä»¶ç»‘å®šonDurationChanged()å‡½æ•°ã€‚å‡½æ•°ä¸ºè®¡ç®—éŸ³é¢‘æ€»çš„æ—¶é—´ã€‚</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ—¶é•¿å˜åŒ–</span></span><br><span class="line"><span class="built_in">connect</span>(musicplayer, <span class="built_in">SIGNAL</span>(<span class="built_in">durationChanged</span>(qint64)), <span class="keyword">this</span>, <span class="built_in">SLOT</span>(<span class="built_in">onDurationChanged</span>(qint64)));</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::onDurationChanged</span><span class="params">(qint64 dur)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    ui-&gt;timebar-&gt;<span class="built_in">setMaximum</span>(dur);	<span class="comment">// è®¾ç½®è¿›åº¦æ¡çš„æœ€å¤§å€¼</span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> secs = <span class="built_in">int</span>(dur / <span class="number">1000</span>);</span><br><span class="line">    <span class="type">int</span> mins = secs / <span class="number">60</span>;</span><br><span class="line">    secs %= <span class="number">60</span>;</span><br><span class="line">    durationTime = QString::<span class="built_in">asprintf</span>(<span class="string">" %d : %d "</span>, mins, secs);</span><br><span class="line">    <span class="comment">// UIåˆ·æ–°æ—¶é—´</span></span><br><span class="line">    ui-&gt;time-&gt;<span class="built_in">setText</span>(positionTime + <span class="string">" / "</span> + durationTime);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>è‡³äºéŸ³é¢‘éšç€æ’­æ”¾è€Œä½ç½®å’Œè¿›åº¦çš„åˆ·æ–°ï¼Œåˆ™éœ€è¦ä¸ºæ’­æ”¾å™¨musicplayerçš„æ’­æ”¾ä½ç½®å˜åŒ–positionChangedäº‹ä»¶ç»‘å®šonPositionChanged()å‡½æ•°ã€‚å‡½æ•°ä¸ºè®¡ç®—æ’­æ”¾çš„æ—¶é—´ã€‚</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ’­æ”¾ä½ç½®å˜åŒ–</span></span><br><span class="line"><span class="built_in">connect</span>(musicplayer, <span class="built_in">SIGNAL</span>(<span class="built_in">positionChanged</span>(qint64)), <span class="keyword">this</span>, <span class="built_in">SLOT</span>(<span class="built_in">onPositionChanged</span>(qint64)));</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::onPositionChanged</span><span class="params">(qint64 pos)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="comment">// è¿›åº¦æ¡æ»‘åŠ¨åˆ°å°½å¤´ï¼Œé€€å‡ºå‡½æ•°</span></span><br><span class="line">    <span class="keyword">if</span>(ui-&gt;timebar-&gt;<span class="built_in">isSliderDown</span>()) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    ui-&gt;timebar-&gt;<span class="built_in">setSliderPosition</span>(pos);</span><br><span class="line">    <span class="comment">// è®¡ç®—åˆ†å’Œç§’</span></span><br><span class="line">    <span class="type">int</span> secs = <span class="built_in">int</span> (pos / <span class="number">1000</span>);</span><br><span class="line">    <span class="type">int</span> mins = secs / <span class="number">60</span>;</span><br><span class="line">    secs %= <span class="number">60</span>;</span><br><span class="line">    positionTime = QString::<span class="built_in">asprintf</span>(<span class="string">" %d : %d "</span>, mins, secs);</span><br><span class="line">    <span class="comment">// UIåˆ·æ–°æ—¶é—´</span></span><br><span class="line">    ui-&gt;time-&gt;<span class="built_in">setText</span>(positionTime + <span class="string">" / "</span> + durationTime);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h1>å››ã€æ€»ç»“</h1>
<p>è¯¥ç¨‹åºæºä»£ç æ”¾åœ¨<a target="_blank" rel="noopener" href="https://gitee.com/fingsinz/fmusicplayer/">Gitee - https://gitee.com/fingsinz/fmusicplayer/</a></p>
<p>è¯¥é¡¹ç›®åªæ˜¯ä¸€ä¸ªç®€å•çš„æ’­æ”¾å™¨å®ç°ï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åŠ©èŒæ–°è®¤è¯†Qtï¼Œæé«˜è‡ªå·±çš„èƒ½åŠ›ã€‚</p>
<p>ä¸æ”¯æŒç›´æ¥åŠ è½½mp3æ–‡ä»¶ï¼Œéœ€è¦å…ˆä¸‹è½½ç›¸å…³è§£ç å™¨ã€‚æ­¤å¤„é™„ä¸Šè§£ç å™¨é“¾æ¥ï¼š</p>
<p><a target="_blank" rel="noopener" href="https://www.codecguide.com/download_kl.htm">K-lite_codec_pack</a></p>
<p><a target="_blank" rel="noopener" href="https://www.codecguide.com/download_k-lite_codec_pack_basic.htm">K-lite_codec_pack_basicï¼ˆåŸºç¡€ç‰ˆï¼‰</a></p>
<p><a target="_blank" rel="noopener" href="https://www.codecguide.com/download_k-lite_codec_pack_standard.htm">K-lite_codec_pack_standardï¼ˆæ ‡å‡†ç‰ˆï¼‰</a></p>
</div><script src="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>
    </div>

    <div class="post-meta">
        <i>
        
            <span>2023-08-03</span>
            
                <span>è¯¥ç¯‡æ–‡ç« è¢« Fingsinz</span>
            
            
                <span>æ‰“ä¸Šæ ‡ç­¾:
                    
                    
                        <a href='/tags/C/'>
                            C++
                        </a>
                    
                        <a href='/tags/Qt/'>
                            Qt
                        </a>
                    
                </span>
             
             
                <span>å½’ä¸ºåˆ†ç±»:
                    
                    
                        <a href='/categories/%E7%AC%94%E8%AE%B0/'>
                            ç¬”è®°
                        </a>
                    
                </span>
            
        
        </i>
    </div>
    <br>
    
    <!-- <div class="post-footer-pre-next">
        <span>ä¸Šä¸€ç¯‡ï¼š<a href=""></a></span>
        <span class="post-footer-pre-next-last-span-right">ä¸Šä¸€ç¯‡ï¼š<a href=""></a></span>
    </div> -->

    
        

     
</div>



                                      
                    
                    
                    <div class="footer">
    
        <span> 
            Â©2023-2024 

            
                

            
                
                    / <a href="/"> Fingsinz&#39;s Space </a>
                

            
                
                    / <a target="_blank" rel="noopener" href="https://www.zhihu.com/people/fingsinz"> çŸ¥ä¹ </a>
                

            
        </span>
    
</div>
<!--è¿™æ˜¯æŒ‡ä¸€æ¡çº¿å¾€ä¸‹çš„å†…å®¹-->
<div class="footer-last">
    
            <span>æˆ‘åœ¨æƒ³ï¼Œæ—¶ä¸‹ä½ æ‰€éœ€è¦çš„ï¼Œåº”è¯¥æ˜¯ç—›ç—›å¿«å¿«æ¢ä¸ªå¿ƒæƒ…ï¼Œå¹²å¹²è„†è„†äº«å—äººç”Ÿã€‚</span>
            
    
</div>


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

    <!--ç›®å½•-->
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js" type="text/javascript" ></script>
        
<script src="/js/toc.js"></script>

    

    
<script src="/js/randomHeaderContent.js"></script>

    <!--å›åˆ°é¡¶éƒ¨æŒ‰é’®-->
    
        
<script src="/js/returnToTop.js"></script>

    

    
        
<script src="/js/returnToLastPage.js"></script>

    





<script src="/js/lightgallery.min.js"></script>



                </div>
            
            
                <!-- å›åˆ°é¡¶éƒ¨çš„æŒ‰é’®-->  
                <div class="progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
            
    </body>


</html>